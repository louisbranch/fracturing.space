# Copy to .env for production deployments.
# Generate required keys with:
#   docker compose --profile tools run --rm hmac-key
#   docker compose --profile tools run --rm join-grant-key

# Image registry defaults
FRACTURING_SPACE_IMAGE_REGISTRY=ghcr.io
FRACTURING_SPACE_IMAGE_NAMESPACE=fracturing-space
FRACTURING_SPACE_IMAGE_TAG=REPLACE_WITH_RELEASE_TAG

# Public routing
FRACTURING_SPACE_DOMAIN=example.com
FRACTURING_SPACE_PUBLIC_SCHEME=https
# For production, set to an empty value to omit the port in URLs.
FRACTURING_SPACE_PUBLIC_PORT=

# Caddy bind settings
FRACTURING_SPACE_BIND_ADDR=0.0.0.0
FRACTURING_SPACE_HTTP_PORT=80
FRACTURING_SPACE_HTTPS_PORT=443
FRACTURING_SPACE_CADDY_AUTO_HTTPS=on
# Prefix for site addresses in Caddy.
# Production: leave empty to allow automatic HTTPS
FRACTURING_SPACE_CADDY_SITE_PREFIX=
# Optional, used for ACME contact info. Example:
# FRACTURING_SPACE_CADDY_EMAIL="email ops@example.com"
FRACTURING_SPACE_CADDY_EMAIL=

# Game event integrity (required)
FRACTURING_SPACE_GAME_EVENT_HMAC_KEY=
# Optional key ring format: key_id=secret,comma-separated
FRACTURING_SPACE_GAME_EVENT_HMAC_KEYS=
FRACTURING_SPACE_GAME_EVENT_HMAC_KEY_ID=v1

# Join grant signing and verification (required for invite flows)
FRACTURING_SPACE_JOIN_GRANT_ISSUER=fracturing.space/auth
FRACTURING_SPACE_JOIN_GRANT_AUDIENCE=fracturing.space/game
FRACTURING_SPACE_JOIN_GRANT_PUBLIC_KEY=
FRACTURING_SPACE_JOIN_GRANT_PRIVATE_KEY=
FRACTURING_SPACE_JOIN_GRANT_TTL=5m

# WebAuthn / Passkeys
# RP_ID must match the domain users see in the browser.
# RP_ORIGINS must match the full origin (scheme + domain + port).
FRACTURING_SPACE_WEBAUTHN_RP_ID=example.com
FRACTURING_SPACE_WEBAUTHN_RP_ORIGINS=https://example.com

# OAuth (optional)
# Set when you need third-party OAuth clients or admin auth introspection.
FRACTURING_SPACE_OAUTH_CLIENTS=
FRACTURING_SPACE_OAUTH_RESOURCE_SECRET=

# First-party OAuth client (web login flow)
# These enable the "Sign in" button on the landing page.
FRACTURING_SPACE_OAUTH_FIRST_PARTY_CLIENT_ID=fracturing-space
FRACTURING_SPACE_OAUTH_FIRST_PARTY_REDIRECT_URI=https://example.com/auth/callback

# MCP OAuth (optional)
# Use when exposing MCP over HTTP and you want token validation.
FRACTURING_SPACE_MCP_OAUTH_ISSUER=
FRACTURING_SPACE_MCP_OAUTH_RESOURCE_SECRET=

# Web OAuth client (optional)
# Keep in sync with the first-party OAuth client settings.
FRACTURING_SPACE_WEB_OAUTH_CLIENT_ID=fracturing-space
FRACTURING_SPACE_WEB_OAUTH_RESOURCE_SECRET=
FRACTURING_SPACE_WEB_CALLBACK_URL=https://example.com/auth/callback
FRACTURING_SPACE_WEB_AUTH_TOKEN_URL=

# Admin authentication (optional, disabled by default)
# Use when protecting the admin UI with OAuth introspection.
# FRACTURING_SPACE_ADMIN_AUTH_INTROSPECT_URL=https://auth.example.com/introspect
# FRACTURING_SPACE_ADMIN_OAUTH_RESOURCE_SECRET=
# FRACTURING_SPACE_ADMIN_LOGIN_URL=https://example.com/auth/login

# Optional overrides
FRACTURING_SPACE_MCP_ALLOWED_HOSTS=
FRACTURING_SPACE_WEB_DIAL_TIMEOUT=2s
FRACTURING_SPACE_WEB_CACHE_DB_PATH=data/web-cache.db

# Chat service (Compose defaults)
FRACTURING_SPACE_CHAT_HTTP_ADDR=0.0.0.0:8086

# AI service (Compose defaults)
FRACTURING_SPACE_AI_PORT=8087
FRACTURING_SPACE_AI_DB_PATH=data/ai.db
FRACTURING_SPACE_AI_ENCRYPTION_KEY=
