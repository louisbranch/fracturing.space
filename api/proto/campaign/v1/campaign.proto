syntax = "proto3";

package campaign.v1;

import "google/protobuf/timestamp.proto";

option go_package = "github.com/louisbranch/duality-engine/api/gen/go/campaign/v1;campaignv1";

service CampaignService {
  // Create a new campaign metadata record.
  rpc CreateCampaign(CreateCampaignRequest) returns (CreateCampaignResponse);

  // List campaign metadata records.
  rpc ListCampaigns(ListCampaignsRequest) returns (ListCampaignsResponse);
}

message CreateCampaignRequest {
  // Display name for the campaign.
  string name = 1;

  // The mode of GM participation.
  GmMode gm_mode = 2;

  // Number of available player slots.
  int32 player_slots = 3;

  // Optional free-form theme prompt for assistants.
  string theme_prompt = 4;
}

message CreateCampaignResponse {
  Campaign campaign = 1;
  repeated string warnings = 2;
}

message ListCampaignsRequest {
  // The maximum number of campaigns to return.
  // If zero, the server defaults to 10. The server clamps values above 10 to 10.
  int32 page_size = 1;

  // A page token received from a prior ListCampaignsResponse.
  string page_token = 2;
}

message ListCampaignsResponse {
  repeated Campaign campaigns = 1;
  string next_page_token = 2;
}

message Campaign {
  string id = 1;
  string name = 2;
  GmMode gm_mode = 3;
  int32 player_slots = 4;
  string theme_prompt = 5;
  google.protobuf.Timestamp created_at = 6;
  google.protobuf.Timestamp updated_at = 7;
}

enum GmMode {
  GM_MODE_UNSPECIFIED = 0;
  HUMAN = 1;
  AI = 2;
  HYBRID = 3;
}
