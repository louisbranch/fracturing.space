// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: daggerheart.sql

package db

import (
	"context"
	"database/sql"
)

const deleteDaggerheartCharacterProfile = `-- name: DeleteDaggerheartCharacterProfile :exec
DELETE FROM daggerheart_character_profiles
WHERE campaign_id = ? AND character_id = ?
`

type DeleteDaggerheartCharacterProfileParams struct {
	CampaignID  string `json:"campaign_id"`
	CharacterID string `json:"character_id"`
}

func (q *Queries) DeleteDaggerheartCharacterProfile(ctx context.Context, arg DeleteDaggerheartCharacterProfileParams) error {
	_, err := q.db.ExecContext(ctx, deleteDaggerheartCharacterProfile, arg.CampaignID, arg.CharacterID)
	return err
}

const deleteDaggerheartCharacterState = `-- name: DeleteDaggerheartCharacterState :exec
DELETE FROM daggerheart_character_states
WHERE campaign_id = ? AND character_id = ?
`

type DeleteDaggerheartCharacterStateParams struct {
	CampaignID  string `json:"campaign_id"`
	CharacterID string `json:"character_id"`
}

func (q *Queries) DeleteDaggerheartCharacterState(ctx context.Context, arg DeleteDaggerheartCharacterStateParams) error {
	_, err := q.db.ExecContext(ctx, deleteDaggerheartCharacterState, arg.CampaignID, arg.CharacterID)
	return err
}

const deleteDaggerheartSnapshot = `-- name: DeleteDaggerheartSnapshot :exec
DELETE FROM daggerheart_snapshots WHERE campaign_id = ?
`

func (q *Queries) DeleteDaggerheartSnapshot(ctx context.Context, campaignID string) error {
	_, err := q.db.ExecContext(ctx, deleteDaggerheartSnapshot, campaignID)
	return err
}

const getDaggerheartCharacterProfile = `-- name: GetDaggerheartCharacterProfile :one


SELECT campaign_id, character_id, hp_max, stress_max, evasion, major_threshold, severe_threshold, agility, strength, finesse, instinct, presence, knowledge FROM daggerheart_character_profiles
WHERE campaign_id = ? AND character_id = ?
`

type GetDaggerheartCharacterProfileParams struct {
	CampaignID  string `json:"campaign_id"`
	CharacterID string `json:"character_id"`
}

// Daggerheart-specific queries for extension tables.
// Character Profile Extensions
func (q *Queries) GetDaggerheartCharacterProfile(ctx context.Context, arg GetDaggerheartCharacterProfileParams) (DaggerheartCharacterProfile, error) {
	row := q.db.QueryRowContext(ctx, getDaggerheartCharacterProfile, arg.CampaignID, arg.CharacterID)
	var i DaggerheartCharacterProfile
	err := row.Scan(
		&i.CampaignID,
		&i.CharacterID,
		&i.HpMax,
		&i.StressMax,
		&i.Evasion,
		&i.MajorThreshold,
		&i.SevereThreshold,
		&i.Agility,
		&i.Strength,
		&i.Finesse,
		&i.Instinct,
		&i.Presence,
		&i.Knowledge,
	)
	return i, err
}

const getDaggerheartCharacterSheet = `-- name: GetDaggerheartCharacterSheet :one

SELECT
    c.campaign_id,
    c.id as character_id,
    c.name,
    c.kind,
    c.notes,
    c.created_at,
    c.updated_at,
    dcp.hp_max,
    dcp.stress_max,
    dcp.evasion,
    dcp.major_threshold,
    dcp.severe_threshold,
    dcp.agility,
    dcp.strength,
    dcp.finesse,
    dcp.instinct,
    dcp.presence,
    dcp.knowledge,
    dcs.hp,
    dcs.hope,
    dcs.stress
FROM characters c
LEFT JOIN daggerheart_character_profiles dcp ON c.campaign_id = dcp.campaign_id AND c.id = dcp.character_id
LEFT JOIN daggerheart_character_states dcs ON c.campaign_id = dcs.campaign_id AND c.id = dcs.character_id
WHERE c.campaign_id = ? AND c.id = ?
`

type GetDaggerheartCharacterSheetParams struct {
	CampaignID string `json:"campaign_id"`
	ID         string `json:"id"`
}

type GetDaggerheartCharacterSheetRow struct {
	CampaignID      string        `json:"campaign_id"`
	CharacterID     string        `json:"character_id"`
	Name            string        `json:"name"`
	Kind            string        `json:"kind"`
	Notes           string        `json:"notes"`
	CreatedAt       string        `json:"created_at"`
	UpdatedAt       string        `json:"updated_at"`
	HpMax           sql.NullInt64 `json:"hp_max"`
	StressMax       sql.NullInt64 `json:"stress_max"`
	Evasion         sql.NullInt64 `json:"evasion"`
	MajorThreshold  sql.NullInt64 `json:"major_threshold"`
	SevereThreshold sql.NullInt64 `json:"severe_threshold"`
	Agility         sql.NullInt64 `json:"agility"`
	Strength        sql.NullInt64 `json:"strength"`
	Finesse         sql.NullInt64 `json:"finesse"`
	Instinct        sql.NullInt64 `json:"instinct"`
	Presence        sql.NullInt64 `json:"presence"`
	Knowledge       sql.NullInt64 `json:"knowledge"`
	Hp              sql.NullInt64 `json:"hp"`
	Hope            sql.NullInt64 `json:"hope"`
	Stress          sql.NullInt64 `json:"stress"`
}

// Joined queries for convenience
func (q *Queries) GetDaggerheartCharacterSheet(ctx context.Context, arg GetDaggerheartCharacterSheetParams) (GetDaggerheartCharacterSheetRow, error) {
	row := q.db.QueryRowContext(ctx, getDaggerheartCharacterSheet, arg.CampaignID, arg.ID)
	var i GetDaggerheartCharacterSheetRow
	err := row.Scan(
		&i.CampaignID,
		&i.CharacterID,
		&i.Name,
		&i.Kind,
		&i.Notes,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.HpMax,
		&i.StressMax,
		&i.Evasion,
		&i.MajorThreshold,
		&i.SevereThreshold,
		&i.Agility,
		&i.Strength,
		&i.Finesse,
		&i.Instinct,
		&i.Presence,
		&i.Knowledge,
		&i.Hp,
		&i.Hope,
		&i.Stress,
	)
	return i, err
}

const getDaggerheartCharacterState = `-- name: GetDaggerheartCharacterState :one

SELECT campaign_id, character_id, hp, hope, stress FROM daggerheart_character_states
WHERE campaign_id = ? AND character_id = ?
`

type GetDaggerheartCharacterStateParams struct {
	CampaignID  string `json:"campaign_id"`
	CharacterID string `json:"character_id"`
}

// Character State Extensions
func (q *Queries) GetDaggerheartCharacterState(ctx context.Context, arg GetDaggerheartCharacterStateParams) (DaggerheartCharacterState, error) {
	row := q.db.QueryRowContext(ctx, getDaggerheartCharacterState, arg.CampaignID, arg.CharacterID)
	var i DaggerheartCharacterState
	err := row.Scan(
		&i.CampaignID,
		&i.CharacterID,
		&i.Hp,
		&i.Hope,
		&i.Stress,
	)
	return i, err
}

const getDaggerheartSnapshot = `-- name: GetDaggerheartSnapshot :one

SELECT campaign_id, gm_fear FROM daggerheart_snapshots WHERE campaign_id = ?
`

// Snapshot Extensions
func (q *Queries) GetDaggerheartSnapshot(ctx context.Context, campaignID string) (DaggerheartSnapshot, error) {
	row := q.db.QueryRowContext(ctx, getDaggerheartSnapshot, campaignID)
	var i DaggerheartSnapshot
	err := row.Scan(&i.CampaignID, &i.GmFear)
	return i, err
}

const listDaggerheartCharacterStates = `-- name: ListDaggerheartCharacterStates :many
SELECT
    campaign_id,
    character_id,
    hp,
    hope,
    stress
FROM daggerheart_character_states
WHERE campaign_id = ?
`

func (q *Queries) ListDaggerheartCharacterStates(ctx context.Context, campaignID string) ([]DaggerheartCharacterState, error) {
	rows, err := q.db.QueryContext(ctx, listDaggerheartCharacterStates, campaignID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []DaggerheartCharacterState{}
	for rows.Next() {
		var i DaggerheartCharacterState
		if err := rows.Scan(
			&i.CampaignID,
			&i.CharacterID,
			&i.Hp,
			&i.Hope,
			&i.Stress,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const putDaggerheartCharacterProfile = `-- name: PutDaggerheartCharacterProfile :exec
INSERT INTO daggerheart_character_profiles (
    campaign_id, character_id, hp_max, stress_max, evasion, major_threshold, severe_threshold,
    agility, strength, finesse, instinct, presence, knowledge
) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
ON CONFLICT(campaign_id, character_id) DO UPDATE SET
    hp_max = excluded.hp_max,
    stress_max = excluded.stress_max,
    evasion = excluded.evasion,
    major_threshold = excluded.major_threshold,
    severe_threshold = excluded.severe_threshold,
    agility = excluded.agility,
    strength = excluded.strength,
    finesse = excluded.finesse,
    instinct = excluded.instinct,
    presence = excluded.presence,
    knowledge = excluded.knowledge
`

type PutDaggerheartCharacterProfileParams struct {
	CampaignID      string `json:"campaign_id"`
	CharacterID     string `json:"character_id"`
	HpMax           int64  `json:"hp_max"`
	StressMax       int64  `json:"stress_max"`
	Evasion         int64  `json:"evasion"`
	MajorThreshold  int64  `json:"major_threshold"`
	SevereThreshold int64  `json:"severe_threshold"`
	Agility         int64  `json:"agility"`
	Strength        int64  `json:"strength"`
	Finesse         int64  `json:"finesse"`
	Instinct        int64  `json:"instinct"`
	Presence        int64  `json:"presence"`
	Knowledge       int64  `json:"knowledge"`
}

func (q *Queries) PutDaggerheartCharacterProfile(ctx context.Context, arg PutDaggerheartCharacterProfileParams) error {
	_, err := q.db.ExecContext(ctx, putDaggerheartCharacterProfile,
		arg.CampaignID,
		arg.CharacterID,
		arg.HpMax,
		arg.StressMax,
		arg.Evasion,
		arg.MajorThreshold,
		arg.SevereThreshold,
		arg.Agility,
		arg.Strength,
		arg.Finesse,
		arg.Instinct,
		arg.Presence,
		arg.Knowledge,
	)
	return err
}

const putDaggerheartCharacterState = `-- name: PutDaggerheartCharacterState :exec
INSERT INTO daggerheart_character_states (
    campaign_id, character_id, hp, hope, stress
) VALUES (?, ?, ?, ?, ?)
ON CONFLICT(campaign_id, character_id) DO UPDATE SET
    hp = excluded.hp,
    hope = excluded.hope,
    stress = excluded.stress
`

type PutDaggerheartCharacterStateParams struct {
	CampaignID  string `json:"campaign_id"`
	CharacterID string `json:"character_id"`
	Hp          int64  `json:"hp"`
	Hope        int64  `json:"hope"`
	Stress      int64  `json:"stress"`
}

func (q *Queries) PutDaggerheartCharacterState(ctx context.Context, arg PutDaggerheartCharacterStateParams) error {
	_, err := q.db.ExecContext(ctx, putDaggerheartCharacterState,
		arg.CampaignID,
		arg.CharacterID,
		arg.Hp,
		arg.Hope,
		arg.Stress,
	)
	return err
}

const putDaggerheartSnapshot = `-- name: PutDaggerheartSnapshot :exec
INSERT INTO daggerheart_snapshots (campaign_id, gm_fear)
VALUES (?, ?)
ON CONFLICT(campaign_id) DO UPDATE SET
    gm_fear = excluded.gm_fear
`

type PutDaggerheartSnapshotParams struct {
	CampaignID string `json:"campaign_id"`
	GmFear     int64  `json:"gm_fear"`
}

func (q *Queries) PutDaggerheartSnapshot(ctx context.Context, arg PutDaggerheartSnapshotParams) error {
	_, err := q.db.ExecContext(ctx, putDaggerheartSnapshot, arg.CampaignID, arg.GmFear)
	return err
}

const updateDaggerheartCharacterState = `-- name: UpdateDaggerheartCharacterState :exec
UPDATE daggerheart_character_states
SET hp = ?, hope = ?, stress = ?
WHERE campaign_id = ? AND character_id = ?
`

type UpdateDaggerheartCharacterStateParams struct {
	Hp          int64  `json:"hp"`
	Hope        int64  `json:"hope"`
	Stress      int64  `json:"stress"`
	CampaignID  string `json:"campaign_id"`
	CharacterID string `json:"character_id"`
}

func (q *Queries) UpdateDaggerheartCharacterState(ctx context.Context, arg UpdateDaggerheartCharacterStateParams) error {
	_, err := q.db.ExecContext(ctx, updateDaggerheartCharacterState,
		arg.Hp,
		arg.Hope,
		arg.Stress,
		arg.CampaignID,
		arg.CharacterID,
	)
	return err
}

const updateDaggerheartCharacterStateHopeStress = `-- name: UpdateDaggerheartCharacterStateHopeStress :exec
UPDATE daggerheart_character_states
SET hope = ?, stress = ?
WHERE campaign_id = ? AND character_id = ?
`

type UpdateDaggerheartCharacterStateHopeStressParams struct {
	Hope        int64  `json:"hope"`
	Stress      int64  `json:"stress"`
	CampaignID  string `json:"campaign_id"`
	CharacterID string `json:"character_id"`
}

func (q *Queries) UpdateDaggerheartCharacterStateHopeStress(ctx context.Context, arg UpdateDaggerheartCharacterStateHopeStressParams) error {
	_, err := q.db.ExecContext(ctx, updateDaggerheartCharacterStateHopeStress,
		arg.Hope,
		arg.Stress,
		arg.CampaignID,
		arg.CharacterID,
	)
	return err
}

const updateDaggerheartGmFear = `-- name: UpdateDaggerheartGmFear :exec
UPDATE daggerheart_snapshots SET gm_fear = ? WHERE campaign_id = ?
`

type UpdateDaggerheartGmFearParams struct {
	GmFear     int64  `json:"gm_fear"`
	CampaignID string `json:"campaign_id"`
}

func (q *Queries) UpdateDaggerheartGmFear(ctx context.Context, arg UpdateDaggerheartGmFearParams) error {
	_, err := q.db.ExecContext(ctx, updateDaggerheartGmFear, arg.GmFear, arg.CampaignID)
	return err
}
