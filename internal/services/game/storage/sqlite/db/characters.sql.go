// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: characters.sql

package db

import (
	"context"
)

const deleteCharacter = `-- name: DeleteCharacter :exec
DELETE FROM characters
WHERE campaign_id = ? AND id = ?
`

type DeleteCharacterParams struct {
	CampaignID string `json:"campaign_id"`
	ID         string `json:"id"`
}

func (q *Queries) DeleteCharacter(ctx context.Context, arg DeleteCharacterParams) error {
	_, err := q.db.ExecContext(ctx, deleteCharacter, arg.CampaignID, arg.ID)
	return err
}

const getCharacter = `-- name: GetCharacter :one
SELECT campaign_id, id, name, kind, notes, created_at, updated_at FROM characters WHERE campaign_id = ? AND id = ?
`

type GetCharacterParams struct {
	CampaignID string `json:"campaign_id"`
	ID         string `json:"id"`
}

func (q *Queries) GetCharacter(ctx context.Context, arg GetCharacterParams) (Character, error) {
	row := q.db.QueryRowContext(ctx, getCharacter, arg.CampaignID, arg.ID)
	var i Character
	err := row.Scan(
		&i.CampaignID,
		&i.ID,
		&i.Name,
		&i.Kind,
		&i.Notes,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getControlDefault = `-- name: GetControlDefault :one
SELECT campaign_id, character_id, is_gm, participant_id FROM control_defaults WHERE campaign_id = ? AND character_id = ?
`

type GetControlDefaultParams struct {
	CampaignID  string `json:"campaign_id"`
	CharacterID string `json:"character_id"`
}

func (q *Queries) GetControlDefault(ctx context.Context, arg GetControlDefaultParams) (ControlDefault, error) {
	row := q.db.QueryRowContext(ctx, getControlDefault, arg.CampaignID, arg.CharacterID)
	var i ControlDefault
	err := row.Scan(
		&i.CampaignID,
		&i.CharacterID,
		&i.IsGm,
		&i.ParticipantID,
	)
	return i, err
}

const listCharactersByCampaign = `-- name: ListCharactersByCampaign :many
SELECT campaign_id, id, name, kind, notes, created_at, updated_at FROM characters
WHERE campaign_id = ?
ORDER BY id
`

func (q *Queries) ListCharactersByCampaign(ctx context.Context, campaignID string) ([]Character, error) {
	rows, err := q.db.QueryContext(ctx, listCharactersByCampaign, campaignID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []Character{}
	for rows.Next() {
		var i Character
		if err := rows.Scan(
			&i.CampaignID,
			&i.ID,
			&i.Name,
			&i.Kind,
			&i.Notes,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listCharactersByCampaignPaged = `-- name: ListCharactersByCampaignPaged :many
SELECT campaign_id, id, name, kind, notes, created_at, updated_at FROM characters
WHERE campaign_id = ? AND id > ?
ORDER BY id
LIMIT ?
`

type ListCharactersByCampaignPagedParams struct {
	CampaignID string `json:"campaign_id"`
	ID         string `json:"id"`
	Limit      int64  `json:"limit"`
}

func (q *Queries) ListCharactersByCampaignPaged(ctx context.Context, arg ListCharactersByCampaignPagedParams) ([]Character, error) {
	rows, err := q.db.QueryContext(ctx, listCharactersByCampaignPaged, arg.CampaignID, arg.ID, arg.Limit)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []Character{}
	for rows.Next() {
		var i Character
		if err := rows.Scan(
			&i.CampaignID,
			&i.ID,
			&i.Name,
			&i.Kind,
			&i.Notes,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listCharactersByCampaignPagedFirst = `-- name: ListCharactersByCampaignPagedFirst :many
SELECT campaign_id, id, name, kind, notes, created_at, updated_at FROM characters
WHERE campaign_id = ?
ORDER BY id
LIMIT ?
`

type ListCharactersByCampaignPagedFirstParams struct {
	CampaignID string `json:"campaign_id"`
	Limit      int64  `json:"limit"`
}

func (q *Queries) ListCharactersByCampaignPagedFirst(ctx context.Context, arg ListCharactersByCampaignPagedFirstParams) ([]Character, error) {
	rows, err := q.db.QueryContext(ctx, listCharactersByCampaignPagedFirst, arg.CampaignID, arg.Limit)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []Character{}
	for rows.Next() {
		var i Character
		if err := rows.Scan(
			&i.CampaignID,
			&i.ID,
			&i.Name,
			&i.Kind,
			&i.Notes,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const putCharacter = `-- name: PutCharacter :exec
INSERT INTO characters (
    campaign_id, id, name, kind, notes, created_at, updated_at
) VALUES (?, ?, ?, ?, ?, ?, ?)
ON CONFLICT(campaign_id, id) DO UPDATE SET
    name = excluded.name,
    kind = excluded.kind,
    notes = excluded.notes,
    updated_at = excluded.updated_at
`

type PutCharacterParams struct {
	CampaignID string `json:"campaign_id"`
	ID         string `json:"id"`
	Name       string `json:"name"`
	Kind       string `json:"kind"`
	Notes      string `json:"notes"`
	CreatedAt  string `json:"created_at"`
	UpdatedAt  string `json:"updated_at"`
}

func (q *Queries) PutCharacter(ctx context.Context, arg PutCharacterParams) error {
	_, err := q.db.ExecContext(ctx, putCharacter,
		arg.CampaignID,
		arg.ID,
		arg.Name,
		arg.Kind,
		arg.Notes,
		arg.CreatedAt,
		arg.UpdatedAt,
	)
	return err
}

const putControlDefault = `-- name: PutControlDefault :exec
INSERT INTO control_defaults (
    campaign_id, character_id, is_gm, participant_id
) VALUES (?, ?, ?, ?)
ON CONFLICT(campaign_id, character_id) DO UPDATE SET
    is_gm = excluded.is_gm,
    participant_id = excluded.participant_id
`

type PutControlDefaultParams struct {
	CampaignID    string `json:"campaign_id"`
	CharacterID   string `json:"character_id"`
	IsGm          int64  `json:"is_gm"`
	ParticipantID string `json:"participant_id"`
}

func (q *Queries) PutControlDefault(ctx context.Context, arg PutControlDefaultParams) error {
	_, err := q.db.ExecContext(ctx, putControlDefault,
		arg.CampaignID,
		arg.CharacterID,
		arg.IsGm,
		arg.ParticipantID,
	)
	return err
}
