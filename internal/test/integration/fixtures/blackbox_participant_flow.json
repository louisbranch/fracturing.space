{
  "name": "mcp_http_blackbox_participant_flow",
  "steps": [
    {
      "name": "initialize",
      "action": "initialize"
    },
    {
      "name": "initialized",
      "action": "initialized"
    },
    {
      "name": "campaign_create",
      "action": "tool_call",
      "tool": "campaign_create",
      "args": {
        "name": "Participant Scenario",
        "system": "DAGGERHEART",
        "gm_mode": "HUMAN",
        "theme_prompt": "participants"
      },
      "capture": {
        "campaign_id": "campaign"
      }
    },
    {
      "name": "owner_participant_read",
      "action": "read_resource",
      "uri": "campaign://{{campaign_id}}/participants",
      "capture": {
        "owner_id": "result.contents[0].text|json.participants[0].id"
      }
    },
    {
      "name": "set_context_owner",
      "action": "tool_call",
      "tool": "set_context",
      "args": {
        "campaign_id": {"ref": "campaign_id"},
        "participant_id": {"ref": "owner_id"}
      },
      "expect": "none"
    },
    {
      "name": "participant_create",
      "action": "tool_call",
      "tool": "participant_create",
      "args": {
        "campaign_id": {"ref": "campaign_id"},
        "name": "Scenario Player",
        "role": "PLAYER",
        "controller": "HUMAN"
      },
      "capture": {
        "participant_id": "participant"
      }
    },
    {
      "name": "participant_list_read",
      "action": "read_resource",
      "uri": "campaign://{{campaign_id}}/participants",
      "expect_contains": {
        "result.contents[0].text|json.participants": [
          {"id": "{{participant_id}}"}
        ]
      }
    }
  ]
}
