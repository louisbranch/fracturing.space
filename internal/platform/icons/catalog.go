package icons

import (
	"strings"

	commonv1 "github.com/louisbranch/fracturing.space/api/gen/go/common/v1"
)

// Definition describes a core icon entry.
type Definition struct {
	ID          commonv1.IconId
	Name        string
	Description string
}

var catalog = []Definition{
	{
		ID:          commonv1.IconId_ICON_ID_GENERIC,
		Name:        "Generic",
		Description: "Default icon for uncategorized entries.",
	},
	{
		ID:          commonv1.IconId_ICON_ID_CAMPAIGN,
		Name:        "Campaign",
		Description: "Campaign lifecycle and metadata events.",
	},
	{
		ID:          commonv1.IconId_ICON_ID_PARTICIPANT,
		Name:        "Participant",
		Description: "Participant and seat management events.",
	},
	{
		ID:          commonv1.IconId_ICON_ID_CHARACTER,
		Name:        "Character",
		Description: "Character creation and updates.",
	},
	{
		ID:          commonv1.IconId_ICON_ID_SESSION,
		Name:        "Session",
		Description: "Session lifecycle and control events.",
	},
}

// Catalog returns a copy of the icon catalog definitions.
func Catalog() []Definition {
	result := make([]Definition, len(catalog))
	copy(result, catalog)
	return result
}

// CatalogMarkdown renders the icon catalog as markdown.
func CatalogMarkdown() string {
	var builder strings.Builder
	builder.WriteString("# Icon Catalog\n\n")
	builder.WriteString("Generated by `go generate ./internal/platform/icons`.\n\n")
	builder.WriteString("| Icon ID | Name | Description |\n")
	builder.WriteString("| --- | --- | --- |\n")
	for _, def := range catalog {
		builder.WriteString("| ")
		builder.WriteString(def.ID.String())
		builder.WriteString(" | ")
		builder.WriteString(def.Name)
		builder.WriteString(" | ")
		builder.WriteString(def.Description)
		builder.WriteString(" |\n")
	}
	return builder.String()
}
